<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="view-transition" content="same-origin" />
    <title>Lucy's Hen Do</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      /* =========================
         Theme (modern: midnight + aurora)
      ========================== */
      :root{
        --bg0:#050612;
        --bg1:#070A1A;
        --card: rgba(10, 12, 28, .55);
        --card2: rgba(10, 12, 28, .38);
        --stroke: rgba(255,255,255,.10);
        --stroke2: rgba(255,255,255,.14);
        --text: rgba(255,255,255,.92);
        --muted: rgba(255,255,255,.72);

        --a1: 195 100% 58%; /* cyan */
        --a2: 270 95% 68%;  /* violet */
        --a3: 320 90% 66%;  /* pink */
        --glow: 0 18px 70px rgba(0,0,0,.45);

        --nav-h: 76px;
      }

      html { scroll-behavior: smooth; }
      html, body {
        min-height: 100%;
        background: #050612; /* matches your darkest theme color */
      }

      body {
        background-attachment: fixed; /* helps some mobile browsers */
      }      
      section { scroll-margin-top: calc(var(--nav-h) + 16px); }

      /* iOS safe-area support */
      .safe-x {
        padding-left: max(16px, env(safe-area-inset-left));
        padding-right: max(16px, env(safe-area-inset-right));
      }
      .safe-top { padding-top: env(safe-area-inset-top); }
      .safe-bottom-fixed { bottom: max(16px, env(safe-area-inset-bottom)); }

      /* =========================
         Background layers
      ========================== */
      .bg-base{
        background:
          radial-gradient(900px 600px at 15% 15%, hsla(var(--a2), .18), transparent 60%),
          radial-gradient(800px 600px at 85% 18%, hsla(var(--a1), .14), transparent 58%),
          radial-gradient(900px 700px at 55% 92%, hsla(var(--a3), .10), transparent 60%),
          linear-gradient(180deg, var(--bg1), var(--bg0));
      }

      /* Animated aurora ribbon */
      .aurora {
        filter: blur(28px);
        opacity: .55;
        background:
          radial-gradient(circle at 30% 30%, hsla(var(--a2), .22), transparent 55%),
          radial-gradient(circle at 70% 60%, hsla(var(--a1), .18), transparent 60%),
          radial-gradient(circle at 50% 85%, hsla(var(--a3), .14), transparent 62%);
        animation: drift 12s ease-in-out infinite;
      }
      @keyframes drift {
        0%,100% { transform: translateX(-50%) translateY(0) scale(1); }
        50% { transform: translateX(-46%) translateY(18px) scale(1.06); }
      }

      /* Cursor spotlight (desktop) */
      .spotlight {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: -5;
        background: radial-gradient(260px 260px at var(--mx, 50%) var(--my, 25%),
          rgba(255,255,255,.08),
          transparent 65%);
        opacity: .65;
        transition: opacity 250ms ease;
      }

      /* =========================
         Glass cards + gradient border
      ========================== */
      .glass {
        backdrop-filter: blur(12px);
        background: var(--card);
        border: 1px solid var(--stroke);
        box-shadow: var(--glow);
      }

      .grad-border {
        position: relative;
        border-radius: 24px;
      }
      .grad-border::before{
        content:"";
        position:absolute;
        inset:-1px;
        border-radius: inherit;
        background: linear-gradient(135deg,
          hsla(var(--a2), .55),
          hsla(var(--a1), .45),
          hsla(var(--a3), .40));
        opacity: .22;
        pointer-events:none;
        mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        padding:1px;
        -webkit-mask-composite: xor;
        mask-composite: exclude;
      }

      /* Subtle shine sweep on hover */
      .shine {
        position: relative;
        overflow: hidden;
      }
      .shine::after{
        content:"";
        position:absolute;
        top:-120%;
        left:-60%;
        width: 60%;
        height: 260%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,.16), transparent);
        transform: rotate(18deg);
        opacity: 0;
        transition: opacity 220ms ease;
      }
      .shine:hover::after{
        opacity: 1;
        animation: sweep 900ms ease;
      }
      @keyframes sweep{
        from{ transform: translateX(-20%) rotate(18deg); }
        to{ transform: translateX(210%) rotate(18deg); }
      }

      /* =========================
         Motion system
      ========================== */
      .reveal {
        opacity: 0;
        transform: translateY(14px) scale(.99);
        transition:
          opacity 700ms cubic-bezier(.2,.8,.2,1),
          transform 700ms cubic-bezier(.2,.8,.2,1);
        transition-delay: var(--d, 0ms);
        will-change: transform, opacity;
      }
      .reveal.show {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      /* Micro interactions */
      .lift {
        transition: transform 220ms ease, border-color 220ms ease, box-shadow 220ms ease;
        will-change: transform;
      }
      .lift:hover { transform: translateY(-2px); border-color: var(--stroke2); }
      .press:active { transform: translateY(1px) scale(.99); }

      /* Magnetic button (JS sets translate) */
      .mag {
        transition: transform 160ms ease;
        will-change: transform;
      }

      /* =========================
         Timeline (rail + fill)
      ========================== */
      .timeline { position: relative; }
      .timeline::before{
        content:"";
        position:absolute;
        top: 0;
        bottom: 0;
        left: 24px;
        width: 2px;
        background: rgba(255,255,255,.10);
        border-radius: 999px;
      }

      /* Progress fill on the rail */
      .timeline-progress{
        position:absolute;
        left: 24px;
        top: 0;
        width: 2px;
        height: 0px;
        border-radius: 999px;
        background: linear-gradient(180deg,
          hsla(var(--a2), .95),
          hsla(var(--a1), .85),
          hsla(var(--a3), .75));
        box-shadow: 0 0 18px hsla(var(--a2), .28);
        transform: translateX(-0px);
        will-change: height;
      }

      .timeline-item{
        position: relative;
        padding-left: 56px;
      }

      .timeline-dot{
        position:absolute;
        left:24px;
        top: 28px;
        transform: translateX(-50%);
        width: 12px;
        height: 12px;
        border-radius: 999px;
        background: rgba(255,255,255,.85);
        box-shadow: 0 0 0 7px rgba(255,255,255,.07);
        opacity: .55;
        transition: opacity 220ms ease, transform 220ms ease, box-shadow 220ms ease;
        z-index: 30;
      }

      .timeline-connector{
        position:absolute;
        left:24px;
        top: 34px;
        width: 22px;
        height: 1px;
        background: rgba(255,255,255,.12);
        z-index: 20;
      }

      /* Active state */
      @keyframes pulse-dot {
        0% { box-shadow: 0 0 0 7px rgba(255,255,255,.08), 0 0 0 0 hsla(var(--a2), .0); }
        50% { box-shadow: 0 0 0 12px hsla(var(--a2), .18), 0 0 22px hsla(var(--a1), .18); }
        100% { box-shadow: 0 0 0 7px rgba(255,255,255,.08), 0 0 0 0 hsla(var(--a2), .0); }
      }
      .timeline-item.is-active .timeline-dot{
        opacity: 1;
        background: white;
        animation: pulse-dot 2.0s ease-in-out infinite;
      }

      .timeline-item.is-active .event-card{
        border-color: rgba(255,255,255,.16);
        box-shadow: 0 18px 70px rgba(0,0,0,.55);
      }

      /* Desktop: center rail */
      @media (min-width: 768px){
        .timeline::before{ left: 50%; transform: translateX(-50%); }
        .timeline-progress{ left: 50%; transform: translateX(-50%); }
        .timeline-item{ padding-left: 0; }
        .timeline-dot{ left: 50%; transform: translateX(-50%); }
        .timeline-connector{ display:none; }
      }

      /* =========================
         Bottom sheet modal
      ========================== */
      dialog.sheet{
        width: min(560px, calc(100% - 24px));
        border: 0;
        padding: 0;
        border-radius: 26px;
        background: transparent;
      }
      dialog.sheet::backdrop{
        background: rgba(0,0,0,.6);
        backdrop-filter: blur(6px);
      }
      .sheet-card{
        background: rgba(10, 12, 28, .78);
        border: 1px solid rgba(255,255,255,.12);
        border-radius: 26px;
        box-shadow: 0 30px 120px rgba(0,0,0,.65);
        overflow: hidden;
        transform: translateY(18px);
        opacity: 0;
        transition: transform 260ms ease, opacity 260ms ease;
      }
      dialog[open] .sheet-card{
        transform: translateY(0);
        opacity: 1;
      }

      /* =========================
         Reduced motion
      ========================== */
      @media (prefers-reduced-motion: reduce){
        html { scroll-behavior: auto; }
        .reveal { transition: none; opacity: 1; transform: none; }
        .aurora { animation: none; }
        .shine::after { display:none; }
        .lift, .mag { transition:none; }
        .timeline-item.is-active .timeline-dot { animation:none; }
        dialog[open] .sheet-card { transition:none; }
        .spotlight { display:none; }
      }
    </style>
  </head>

  <body class="min-h-screen bg-base text-white/90">
    <!-- Cursor spotlight -->
    <div class="spotlight"></div>

    <!-- Aurora blob -->
    <div class="pointer-events-none fixed inset-0 -z-10 overflow-hidden">
      <div class="aurora absolute -top-24 left-1/2 h-[540px] w-[540px] -translate-x-1/2 rounded-full"></div>
    </div>

    <!-- Hero background image -->
    <div class="pointer-events-none fixed left-0 right-0 top-0 -z-20 h-[100svh] md:h-[85vh]">
      <img
        src="./assets/lucy-vertical.jpeg"
        alt=""
        class="h-full w-full object-cover object-[50%_18%] sm:object-[50%_22%] md:object-[50%_30%] opacity-55"
      />
      <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-black/65 to-[#050612]"></div>
      <div class="absolute inset-0 opacity-25 [background-image:radial-gradient(circle_at_1px_1px,rgba(255,255,255,.16)_1px,transparent_0)] [background-size:28px_28px]"></div>
    </div>

    <!-- Nav -->
    <header class="sticky top-0 z-50 bg-black/30 backdrop-blur safe-top">
      <nav class="mx-auto flex max-w-6xl items-center justify-between safe-x py-4">
        <a href="#top" class="flex items-center gap-2 lift press rounded-2xl px-1">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-2xl bg-white/10">üêî</span>
          <span class="text-lg font-semibold tracking-tight">Lucy's Hen Do</span>
        </a>

        <div class="flex items-center gap-2">
          <a
            href="#timeline"
            class="mag lift press rounded-2xl bg-white/10 px-4 py-2 text-sm hover:bg-white/15"
            data-mag
          >
            See plan
          </a>
        </div>
      </nav>
    </header>

    <!-- Page content -->
    <main id="top" class="mx-auto max-w-6xl safe-x pt-24 md:pt-16">
      <!-- Hero card -->
      <section class="reveal" style="--d:0ms">
        <div class="grad-border glass shine lift rounded-[2rem] p-6 md:p-12">
          <div class="mt-1 flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-white/75">
            <span class="inline-flex items-center gap-2">üìç <span>St Andrews, Scotland</span></span>
            <span class="hidden sm:inline text-white/40">‚Ä¢</span>
            <span class="inline-flex items-center gap-2">üóìÔ∏è <span>29-05-2026 ~ 31-05-2026</span></span>
          </div>

          <h1 class="mt-3 text-3xl font-bold tracking-tight leading-tight sm:text-4xl md:text-6xl">
            For Lucy <span class="opacity-90">üíç</span>
          </h1>

          <p class="mt-4 max-w-2xl text-white/80">
            Everything you need for the weekend ‚Äî timeline, accommodation, and links ‚Äî in one clean hub.
          </p>

          <div class="mt-7 flex flex-col gap-3 sm:flex-row">
            <a
              href="#timeline"
              class="mag lift press inline-flex items-center justify-center gap-2 rounded-2xl bg-white px-5 py-3 text-sm font-semibold text-[#050612] hover:opacity-95"
              data-mag
            >
              Go to plan
              <span class="text-base">‚Üí</span>
            </a>

            <button
              type="button"
              class="mag lift press inline-flex items-center justify-center gap-2 rounded-2xl bg-white/10 px-5 py-3 text-sm hover:bg-white/15"
              data-mag
              onclick="toast('Tip: Tap a timeline card for a slick details sheet ‚ú®')"
            >
              What‚Äôs interactive?
            </button>
          </div>
        </div>
      </section>

      <!-- Quick cards -->
      <section class="mt-8 grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <div class="grad-border glass shine reveal lift rounded-3xl p-6" style="--d:90ms">
          <p class="text-xs uppercase tracking-wide text-white/70">Time</p>
          <p class="mt-2 text-lg font-semibold">Friday, 29-05-2026</p>
          <p class="mt-2 text-lg font-semibold opacity-60"> ~ </p>
          <p class="mt-2 text-lg font-semibold">Sunday, 31-05-2026</p>
        </div>

        <div class="grad-border glass shine reveal lift rounded-3xl p-6" style="--d:180ms">
          <p class="text-xs uppercase tracking-wide text-white/70">Accommodation</p>
          <p class="mt-2 text-lg font-semibold">Monksholm House (Farm)</p>

          <a
            href="https://www.google.com/maps?q=Monksholm+House"
            target="_blank"
            rel="noopener noreferrer"
            class="mag lift press mt-3 flex w-full items-center justify-center rounded-2xl bg-white/10 px-4 py-2 text-sm hover:bg-white/15"
            data-mag
          >
            üìç Open in Google Maps
          </a>
        </div>

        <div class="grad-border glass shine reveal lift rounded-3xl p-6" style="--d:270ms">
          <p class="text-xs uppercase tracking-wide text-white/70">Group chat</p>

          <div class="mt-3 flex flex-col gap-2">
            <a
              href="https://chat.whatsapp.com/GlkL4GUrRPDFfYRXXgr3iG"
              target="_blank"
              rel="noopener noreferrer"
              class="mag lift press flex w-full items-center justify-center rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-[#050612] hover:opacity-95"
              data-mag
            >
              Join WhatsApp group
            </a>

            <button
              class="mag lift press w-full rounded-2xl bg-white/10 px-4 py-2 text-sm hover:bg-white/15"
              onclick="copyText('https://chat.whatsapp.com/GlkL4GUrRPDFfYRXXgr3iG')"
              type="button"
              data-mag
            >
              Copy invite link
            </button>
          </div>
        </div>

        <div class="grad-border glass shine reveal lift rounded-3xl p-6" style="--d:360ms">
          <p class="text-xs uppercase tracking-wide text-white/70">Planning & Tasks</p>

          <div class="mt-3 flex flex-col gap-2">
            <a
              href="https://docs.google.com/document/d/15LhYNawj_2yFaHf8a3ZUqgoM15AZ2Qbg5-xkfQ5DWkU/edit?tab=t.0"
              target="_blank"
              rel="noopener noreferrer"
              class="mag lift press flex w-full items-center justify-center rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-[#050612] hover:opacity-95"
              data-mag
            >
              Planning Idea
            </a>

            <a
              href="https://docs.google.com/document/d/15LhYNawj_2yFaHf8a3ZUqgoM15AZ2Qbg5-xkfQ5DWkU/edit?tab=t.2ilkgnlcktm4#heading=h.4s63avcak9o"
              target="_blank"
              rel="noopener noreferrer"
              class="mag lift press mt-3 flex w-full items-center justify-center rounded-2xl bg-white/10 px-4 py-2 text-sm hover:bg-white/15"
              data-mag
            >
              Task List
            </a>
          </div>
        </div>
      </section>

      <!-- Timeline section -->
      <section id="timeline" class="mt-10 reveal" style="--d:0ms">
        <div class="grad-border glass rounded-3xl p-6 md:p-10">
          <div class="flex items-end justify-between gap-4">
            <div>
              <h2 class="text-xl font-bold md:text-2xl">Timeline</h2>
              <p class="mt-2 text-white/80">
                Scroll to fill the rail. Tap a card for the details sheet.
              </p>
            </div>

            <div class="flex items-center gap-3">
              <button
                type="button"
                class="mag lift press rounded-2xl bg-white/10 px-4 py-2 text-sm hover:bg-white/15"
                data-mag
                onclick="scrollToNextTimelineItem()"
              >
                Next ‚Üí
              </button>

              <a href="#top" class="text-sm text-white/70 underline underline-offset-4 hover:text-white">
                Back to top
              </a>
            </div>
          </div>

          <!-- Timeline -->
          <div id="timelineList" class="timeline mt-8 space-y-6">
            <div id="timelineProgress" class="timeline-progress" aria-hidden="true"></div>

            <!-- ITEM 1 -->
            <div class="timeline-item md:grid md:grid-cols-2 md:gap-10" data-item>
              <span class="timeline-dot" aria-hidden="true"></span>
              <span class="timeline-connector md:hidden" aria-hidden="true"></span>

              <div class="md:pr-8">
                <button
                  type="button"
                  class="event-card grad-border glass shine lift press w-full rounded-3xl p-5 text-left"
                  data-sheet
                  data-day="Friday"
                  data-time="Anytime"
                  data-title="Arrivals"
                  data-desc="Get settled and dinner at the accommodation!"
                  data-location="Monksholm House (Farm)"
                  data-map="https://www.google.com/maps?q=Monksholm+House"
                  data-tags="Location: Monksholm House|Parking: on-site"
                >
                  <div class="flex items-center justify-between gap-4">
                    <p class="text-xs uppercase tracking-wide text-white/70">Friday</p>
                    <p class="text-xs text-white/60">Anytime</p>
                  </div>
                  <h3 class="mt-2 text-lg font-semibold">Arrivals</h3>
                  <p class="mt-2 text-sm text-white/80">
                    Get settled and dinner at the accommodation!
                  </p>

                  <div class="mt-4 flex flex-wrap gap-2">
                    <span class="rounded-full bg-white/10 px-3 py-1 text-xs text-white/80">Location: Monksholm House</span>
                    <span class="rounded-full bg-white/10 px-3 py-1 text-xs text-white/80">Parking: on-site</span>
                  </div>
                </button>
              </div>

              <div class="hidden md:block"></div>
            </div>

            <!-- ITEM 2 -->
            <div class="timeline-item md:grid md:grid-cols-2 md:gap-10" data-item>
              <span class="timeline-dot" aria-hidden="true"></span>
              <span class="timeline-connector md:hidden" aria-hidden="true"></span>

              <div class="hidden md:block"></div>

              <div class="md:pl-8">
                <button
                  type="button"
                  class="event-card grad-border glass shine lift press w-full rounded-3xl p-5 text-left"
                  data-sheet
                  data-day="Saturday"
                  data-time="~10:00"
                  data-title="Breakfast (or Brunch)"
                  data-desc="Slow start, coffee, and fuel up."
                  data-location="Monksholm House (Farm)"
                  data-map="https://www.google.com/maps?q=Monksholm+House"
                  data-tags="Location: Monksholm House"
                >
                  <div class="flex items-center justify-between gap-4">
                    <p class="text-xs uppercase tracking-wide text-white/70">Saturday</p>
                    <p class="text-xs text-white/60">~10:00</p>
                  </div>

                  <h3 class="mt-2 text-lg font-semibold">Breakfast (or Brunch)</h3>

                  <p class="mt-2 text-sm text-white/80">
                    Slow start, coffee, and fuel up.
                  </p>

                  <div class="mt-4 flex flex-wrap gap-2">
                    <span class="rounded-full bg-white/10 px-3 py-1 text-xs text-white/80">Location: Monksholm House</span>
                  </div>
                </button>
              </div>
            </div>

            <!-- ITEM 3 -->
            <div class="timeline-item md:grid md:grid-cols-2 md:gap-10" data-item>
              <span class="timeline-dot" aria-hidden="true"></span>
              <span class="timeline-connector md:hidden" aria-hidden="true"></span>

              <div class="md:pr-8">
                <button
                  type="button"
                  class="event-card grad-border glass shine lift press w-full rounded-3xl p-5 text-left"
                  data-sheet
                  data-day="Saturday"
                  data-time="11:30"
                  data-title="Eden Mill Distillery"
                  data-desc="Gin Experience"
                  data-location="Eden Mill Distillery"
                  data-map="https://maps.app.goo.gl/7brLzndfPkY4Ha8Q6"
                  data-tags="Dress: casual|Arrive: 10 mins early|Bring ID: just in case"
                >
                  <div class="flex items-center justify-between gap-4">
                    <p class="text-xs uppercase tracking-wide text-white/70">Saturday</p>
                    <p class="text-xs text-white/60">11:30</p>
                  </div>

                  <h3 class="mt-2 text-lg font-semibold">Eden Mill Distillery</h3>

                  <p class="mt-2 text-sm text-white/80">Gin Experience</p>

                  <div class="mt-4 flex flex-wrap gap-2">
                    <span class="rounded-full bg-white/10 px-3 py-1 text-xs text-white/80">Dress: casual</span>
                    <span class="rounded-full bg-white/10 px-3 py-1 text-xs text-white/80">Tap for actions</span>
                  </div>
                </button>
              </div>

              <div class="hidden md:block"></div>
            </div>

            <!-- ITEM 4 -->
            <div class="timeline-item md:grid md:grid-cols-2 md:gap-10" data-item>
              <span class="timeline-dot" aria-hidden="true"></span>
              <span class="timeline-connector md:hidden" aria-hidden="true"></span>

              <div class="hidden md:block"></div>

              <div class="md:pl-8">
                <button
                  type="button"
                  class="event-card grad-border glass shine lift press w-full rounded-3xl p-5 text-left"
                  data-sheet
                  data-day="Saturday"
                  data-time="13:00"
                  data-title="Lunch / Chill"
                  data-desc="Light lunch and chill at the accommodation."
                  data-location="Monksholm House (Farm)"
                  data-map="https://www.google.com/maps?q=Monksholm+House"
                  data-tags="Optional: walk into town|Outfit change window"
                >
                  <div class="flex items-center justify-between gap-4">
                    <p class="text-xs uppercase tracking-wide text-white/70">Saturday</p>
                    <p class="text-xs text-white/60">13:00</p>
                  </div>

                  <h3 class="mt-2 text-lg font-semibold">Lunch / Chill</h3>

                  <p class="mt-2 text-sm text-white/80">
                    Light lunch and chill at the accommodation.
                  </p>
                </button>
              </div>
            </div>

            <!-- ITEM 5 -->
            <div class="timeline-item md:grid md:grid-cols-2 md:gap-10" data-item>
              <span class="timeline-dot" aria-hidden="true"></span>
              <span class="timeline-connector md:hidden" aria-hidden="true"></span>

              <div class="md:pr-8">
                <button
                  type="button"
                  class="event-card grad-border glass shine lift press w-full rounded-3xl p-5 text-left"
                  data-sheet
                  data-day="Saturday"
                  data-time="19:00"
                  data-title="Dinner"
                  data-desc="Forgan's"
                  data-location="Forgan's St Andrews"
                  data-map="https://maps.app.goo.gl/dLoE6HFbB3Ee8Ht69"
                  data-extra-link="Menu|https://www.forgansstandrews.co.uk/menu/forgans-main-menu.pdf"
                  data-tags="Plan: taxi share|Arrive: a little early"
                >
                  <div class="flex items-center justify-between gap-4">
                    <p class="text-xs uppercase tracking-wide text-white/70">Saturday</p>
                    <p class="text-xs text-white/60">19:00</p>
                  </div>

                  <h3 class="mt-2 text-lg font-semibold">Dinner</h3>

                  <p class="mt-2 text-sm text-white/80">Forgan's</p>

                  <div class="mt-4 flex flex-wrap gap-2">
                    <span class="rounded-full bg-white/10 px-3 py-1 text-xs text-white/80">Tap for map + menu</span>
                  </div>
                </button>
              </div>

              <div class="hidden md:block"></div>
            </div>

            <!-- ITEM 6 -->
            <div class="timeline-item md:grid md:grid-cols-2 md:gap-10" data-item>
              <span class="timeline-dot" aria-hidden="true"></span>
              <span class="timeline-connector md:hidden" aria-hidden="true"></span>

              <div class="hidden md:block"></div>

              <div class="md:pl-8">
                <button
                  type="button"
                  class="event-card grad-border glass shine lift press w-full rounded-3xl p-5 text-left"
                  data-sheet
                  data-day="Sunday"
                  data-time="10:00"
                  data-title="Departure"
                  data-desc="Car pool can be arranged!"
                  data-location="Monksholm House (Farm)"
                  data-map="https://www.google.com/maps?q=Monksholm+House"
                  data-tags="Checkout: 10:00|Coordinate lifts"
                >
                  <div class="flex items-center justify-between gap-4">
                    <p class="text-xs uppercase tracking-wide text-white/70">Sunday</p>
                    <p class="text-xs text-white/60">10:00</p>
                  </div>

                  <h3 class="mt-2 text-lg font-semibold">Departure</h3>

                  <p class="mt-2 text-sm text-white/80">
                    Car pool can be arranged!
                  </p>

                  <div class="mt-4 flex flex-wrap gap-2">
                    <span class="rounded-full bg-white/10 px-3 py-1 text-xs text-white/80">Checkout: 10:00</span>
                  </div>
                </button>
              </div>
            </div>

          </div>
        </div>
      </section>

      <footer class="py-12 text-center text-sm text-white/55">
        Made with Love for Lucy by JC üí´
      </footer>
    </main>

    <!-- Bottom sheet -->
    <dialog id="sheet" class="sheet">
      <div class="sheet-card grad-border">
        <div class="p-5 sm:p-6">
          <div class="flex items-start justify-between gap-4">
            <div>
              <p id="sheetMeta" class="text-xs uppercase tracking-wide text-white/70"></p>
              <h3 id="sheetTitle" class="mt-2 text-xl font-semibold"></h3>
              <p id="sheetDesc" class="mt-2 text-sm text-white/80"></p>
            </div>
            <button
              type="button"
              class="mag lift press rounded-2xl bg-white/10 px-3 py-2 text-sm hover:bg-white/15"
              data-mag
              onclick="closeSheet()"
              aria-label="Close"
            >
              ‚úï
            </button>
          </div>

          <div class="mt-4">
            <p class="text-xs uppercase tracking-wide text-white/60">Location</p>
            <p id="sheetLoc" class="mt-1 text-sm text-white/85"></p>
          </div>

          <div id="sheetTags" class="mt-4 flex flex-wrap gap-2"></div>

          <div class="mt-5 grid gap-2 sm:grid-cols-2">
            <a
              id="sheetMap"
              href="#"
              target="_blank"
              rel="noopener noreferrer"
              class="mag lift press inline-flex items-center justify-center gap-2 rounded-2xl bg-white px-4 py-3 text-sm font-semibold text-[#050612]"
              data-mag
            >
              üìç Open map
            </a>

            <button
              type="button"
              class="mag lift press inline-flex items-center justify-center gap-2 rounded-2xl bg-white/10 px-4 py-3 text-sm hover:bg-white/15"
              data-mag
              onclick="copySheetDetails()"
            >
              üìã Copy details
            </button>

            <a
              id="sheetExtra"
              href="#"
              target="_blank"
              rel="noopener noreferrer"
              class="mag lift press hidden inline-flex items-center justify-center gap-2 rounded-2xl bg-white/10 px-4 py-3 text-sm hover:bg-white/15 sm:col-span-2"
              data-mag
            >
              Open extra link
            </a>
          </div>

          <p class="mt-4 text-xs text-white/55">
            Tip: the timeline rail fills as you scroll ‚ú®
          </p>
        </div>
      </div>
    </dialog>

    <script>
      /* =========================
         Toast + Copy helper
      ========================== */
      async function copyText(text) {
        try {
          await navigator.clipboard.writeText(text.trim());
          toast("Copied!");
        } catch {
          toast("Couldn‚Äôt copy (browser blocked).");
        }
      }

      let toastTimer;
      function toast(msg) {
        clearTimeout(toastTimer);
        let el = document.getElementById("toast");
        if (!el) {
          el = document.createElement("div");
          el.id = "toast";
          el.className =
            "fixed safe-bottom-fixed left-1/2 -translate-x-1/2 rounded-2xl bg-black/70 px-4 py-2 text-sm text-white shadow-lg shadow-black/30";
          document.body.appendChild(el);
        }
        el.textContent = msg;
        el.style.opacity = "1";
        toastTimer = setTimeout(() => (el.style.opacity = "0"), 1400);
      }

      /* =========================
         Scroll reveal
      ========================== */
      const io = new IntersectionObserver(
        (entries) => {
          for (const e of entries) if (e.isIntersecting) e.target.classList.add("show");
        },
        { threshold: 0.12 }
      );
      document.querySelectorAll(".reveal").forEach((el) => io.observe(el));

      /* =========================
         Cursor spotlight (desktop)
      ========================== */
      const spotlight = document.querySelector(".spotlight");
      window.addEventListener("mousemove", (e) => {
        const x = (e.clientX / window.innerWidth) * 100;
        const y = (e.clientY / window.innerHeight) * 100;
        document.documentElement.style.setProperty("--mx", x + "%");
        document.documentElement.style.setProperty("--my", y + "%");
      }, { passive: true });

      /* =========================
         Timeline: active item + rail progress fill
      ========================== */
      const items = [...document.querySelectorAll("[data-item]")];
      const progressEl = document.getElementById("timelineProgress");
      const timelineList = document.getElementById("timelineList");

      // Active item highlighting
      const itemIO = new IntersectionObserver((entries) => {
        const visible = entries.filter((e) => e.isIntersecting);
        if (!visible.length) return;
        visible.sort((a, b) => (b.intersectionRatio || 0) - (a.intersectionRatio || 0));
        const top = visible[0].target;
        items.forEach(i => i.classList.remove("is-active"));
        top.classList.add("is-active");
      }, { threshold: [0.25, 0.45, 0.65] });

      items.forEach(el => itemIO.observe(el));

      // Rail fill (based on scroll position within the timeline list)
      function updateTimelineProgress() {
        const r = timelineList.getBoundingClientRect();
        const viewMid = window.innerHeight * 0.52;
        const total = Math.max(1, r.height);
        const p = Math.min(1, Math.max(0, (viewMid - r.top) / total));
        progressEl.style.height = (p * r.height) + "px";
      }
      updateTimelineProgress();
      window.addEventListener("scroll", updateTimelineProgress, { passive: true });
      window.addEventListener("resize", updateTimelineProgress);

      /* =========================
         Bottom sheet (tap timeline card)
      ========================== */
      const sheet = document.getElementById("sheet");
      const sheetMeta = document.getElementById("sheetMeta");
      const sheetTitle = document.getElementById("sheetTitle");
      const sheetDesc = document.getElementById("sheetDesc");
      const sheetLoc = document.getElementById("sheetLoc");
      const sheetTags = document.getElementById("sheetTags");
      const sheetMap = document.getElementById("sheetMap");
      const sheetExtra = document.getElementById("sheetExtra");

      let currentSheetData = null;

      function openSheetFrom(btn) {
        const d = btn.dataset;
        currentSheetData = {
          day: d.day || "",
          time: d.time || "",
          title: d.title || "",
          desc: d.desc || "",
          location: d.location || "",
          map: d.map || "",
          tags: d.tags || "",
          extra: d.extraLink || "" // "Label|url"
        };

        sheetMeta.textContent = `${currentSheetData.day} ‚Ä¢ ${currentSheetData.time}`;
        sheetTitle.textContent = currentSheetData.title;
        sheetDesc.textContent = currentSheetData.desc;
        sheetLoc.textContent = currentSheetData.location || "‚Äî";
        sheetMap.href = currentSheetData.map || "#";

        // tags
        sheetTags.innerHTML = "";
        const tags = (currentSheetData.tags || "").split("|").map(s => s.trim()).filter(Boolean);
        tags.forEach(t => {
          const span = document.createElement("span");
          span.className = "rounded-full bg-white/10 px-3 py-1 text-xs text-white/85";
          span.textContent = t;
          sheetTags.appendChild(span);
        });

        // extra link
        if (currentSheetData.extra && currentSheetData.extra.includes("|")) {
          const [label, url] = currentSheetData.extra.split("|");
          sheetExtra.classList.remove("hidden");
          sheetExtra.textContent = `‚Üó ${label.trim()}`;
          sheetExtra.href = url.trim();
        } else {
          sheetExtra.classList.add("hidden");
          sheetExtra.href = "#";
        }

        // show modal
        if (typeof sheet.showModal === "function") sheet.showModal();
        else sheet.setAttribute("open", "open");
      }

      function closeSheet() {
        if (sheet.open) sheet.close();
      }

      function copySheetDetails() {
        if (!currentSheetData) return;
        const lines = [
          `${currentSheetData.day} ‚Ä¢ ${currentSheetData.time}`,
          currentSheetData.title,
          currentSheetData.desc,
          `Location: ${currentSheetData.location}`,
          currentSheetData.map ? `Map: ${currentSheetData.map}` : ""
        ].filter(Boolean);
        copyText(lines.join("\n"));
      }

      // click outside to close (on the backdrop area)
      sheet.addEventListener("click", (e) => {
        const card = sheet.querySelector(".sheet-card");
        const r = card.getBoundingClientRect();
        const inside =
          e.clientX >= r.left && e.clientX <= r.right && e.clientY >= r.top && e.clientY <= r.bottom;
        if (!inside) closeSheet();
      });

      document.querySelectorAll("[data-sheet]").forEach((btn) => {
        btn.addEventListener("click", () => openSheetFrom(btn));
      });

      /* =========================
         Hover tilt (desktop, subtle)
      ========================== */
      const tiltCards = document.querySelectorAll(".event-card, .glass");
      tiltCards.forEach((card) => {
        let raf = null;

        card.addEventListener("mousemove", (e) => {
          // avoid tilt on small screens/touch
          if (window.matchMedia("(pointer: coarse)").matches) return;

          const rect = card.getBoundingClientRect();
          const px = (e.clientX - rect.left) / rect.width;
          const py = (e.clientY - rect.top) / rect.height;
          const rx = (py - 0.5) * -4; // rotation range
          const ry = (px - 0.5) * 6;

          if (raf) cancelAnimationFrame(raf);
          raf = requestAnimationFrame(() => {
            card.style.transform = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg) translateY(-2px)`;
          });
        });

        card.addEventListener("mouseleave", () => {
          card.style.transform = "";
        });
      });

      /* =========================
         Magnetic buttons (desktop)
      ========================== */
      document.querySelectorAll("[data-mag]").forEach((btn) => {
        const strength = 10;
        btn.classList.add("mag");

        btn.addEventListener("mousemove", (e) => {
          if (window.matchMedia("(pointer: coarse)").matches) return;
          const r = btn.getBoundingClientRect();
          const dx = e.clientX - (r.left + r.width / 2);
          const dy = e.clientY - (r.top + r.height / 2);
          btn.style.transform = `translate(${dx / strength}px, ${dy / strength}px)`;
        });

        btn.addEventListener("mouseleave", () => {
          btn.style.transform = "";
        });
      });

      /* =========================
         "Next" timeline helper
      ========================== */
      function scrollToNextTimelineItem() {
        const viewMid = window.innerHeight * 0.52;
        const next = items.find((el) => el.getBoundingClientRect().top > viewMid);
        (next || items[items.length - 1]).scrollIntoView({ behavior: "smooth", block: "start" });
      }
      window.scrollToNextTimelineItem = scrollToNextTimelineItem;
      window.closeSheet = closeSheet;
      window.copySheetDetails = copySheetDetails;
    </script>
  </body>
</html>
